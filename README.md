# roBa キーボード キー配置ガイド

roBa は左右分割型のキーボードです。右手側にトラックボール（ポインティングデバイス）が搭載されています。

## 目次

- [基本的な使い方](#基本的な使い方)
- [レイヤーとは](#レイヤーとは)
- [各レイヤーの詳細](#各レイヤーの詳細)
  - [基本レイヤー](#基本レイヤー)
  - [ファンクションキー レイヤー](#ファンクションキー-レイヤー)
  - [数字・記号 レイヤー](#数字記号-レイヤー)
  - [矢印キー レイヤー](#矢印キー-レイヤー)
  - [設定 レイヤー](#設定-レイヤー)
- [特殊な機能](#特殊な機能)
- [Mac JIS配列について](#mac-jis配列について)

---

## 基本的な使い方

このキーボードは **Mac の JIS 配列キーボード設定** で使用できるように設定されています。
Mac の「システム設定」→「キーボード」で「日本語キーボード」を選択してください。

### 日本語と英語の切り替え

- **日本語入力にする**: 左手の親指エリアにある「かな」キーを押す
- **英語入力にする**: 左手の親指エリアにある「英数」キーを押す

### ショートカットキー

一部のキーは **タップ（短く押す）** と **長押し** で違う動作をします：

- **左下のキー（Escape/Ctrl）**
  - タップ：Escape キー
  - 長押し：Control キー

- **かなキー**
  - タップ：日本語入力に切り替え
  - 長押し：Command キー（左手用）

- **; キー（Nの左横）**
  - タップ：セミコロン
  - 長押し：Shift キー（右手用）

- **: キー（左手内側）**
  - タップ：コロン
  - 長押し：Shift キー（左手用）

- **Backspace（消去）キー**
  - タップ：1文字消す
  - 長押し：Control キーとして動作

- **Enter（改行）キー**
  - タップ：改行する
  - 長押し：Command キー（右手用）

- **Delete（削除）キー**
  - タップ：削除する
  - 長押し：ファンクションキー レイヤーに切り替わる

---

## レイヤーとは

「レイヤー」とは、キーボードの **モード** のようなものです。
スマートフォンのキーボードで「あいう」と「ABC」を切り替えるように、このキーボードも複数のレイヤーを切り替えて使います。

全部で **6つのレイヤー** があります：

1. **基本レイヤー**: 普段使うアルファベットや記号
2. **ファンクションキー レイヤー**: F1～F12 キー
3. **数字・記号 レイヤー**: 数字キーパッドと記号
4. **矢印キー レイヤー**: 矢印キーとナビゲーション
5. **マウス レイヤー**: トラックボールのクリック（自動で切り替わる）
6. **設定 レイヤー**: Bluetooth 設定やリセット

---

## 各レイヤーの詳細

### 基本レイヤー

普段使うレイヤーです。アルファベットや基本的な記号が配置されています。

```
左手側:
┌─────┬─────┬─────┬─────┬─────┬───────────┐
│  Q  │  W  │  E  │  R  │  T  │ Cmd+Sh+S  │
├─────┼─────┼─────┼─────┼─────┤(スクショ) │
│  A  │  S  │  D  │  F  │  G  │           │
├─────┼─────┼─────┼─────┼─────┼───────────┤
│  Z  │  X  │  C  │  V  │  B  │   :※1    │
└─────┴─────┴─────┴─────┴─────┴───────────┘
      ┌───────┬───────┬───────┬─────────┐
      │Esc※2 │ Space │  Alt  │ かな※3  │
      └───────┴───────┴───────┴─────────┘
            ┌────────┬──────────┐
            │ Space  │  英数※4  │
            │(長押で │ (長押で   │
            │ 数字)  │  矢印)    │
            └────────┴──────────┘

右手側:
┌───────┬─────┬─────┬─────┬─────┬─────┐
│   -   │  Y  │  U  │ I※5 │  O  │  P  │
├───────┼─────┼─────┼─────┼─────┼─────┤
│  ;※6  │  H  │  J  │  K  │  L  │  '  │
├───────┼─────┼─────┼─────┼─────┼─────┤
│       │  N  │  M  │  ,  │  .  │  /  │
└───────┴─────┴─────┴─────┴─────┴─────┘
      ┌──────────┬──────────┬─────────┐
      │ Backsp※7 │ Enter※8  │ Del※9  │
      └──────────┴──────────┴─────────┘

※1 長押しで Shift キー（左手用）
※2 長押しで Ctrl キー（タップで Escape）
※3 長押しで Command キー
※4 長押しで矢印キーレイヤー
※5 長押しでスクロールレイヤー（トラックボール用）
※6 長押しで Shift キー（右手用）
※7 長押しで Control キー
※8 長押しで Command キー（右手用）
※9 長押しでファンクションキーレイヤー
```

#### 同時押しの特殊機能

2つのキーを同時に押すと、特別な機能が使えます：

| 同時押しするキー | 機能 |
|---|---|
| S + D | Tab キー（タブ移動） |
| D + F | Shift + Tab キー（逆タブ移動） |
| A + S | 英数キー（英語入力に切り替え） |
| S + X | "（ダブルクォーテーション） |
| V + B | =（イコール） |

---

### ファンクションキー レイヤー

**Delete キーを長押ししている間**、このレイヤーが有効になります。

F1～F12 キーに加えて、音量・輝度コントロールとスリープ機能が使えます。

```
左手側（メディアコントロール）:
┌───────┬─────┬────────┬────────┬─────┐
│ Sleep │     │ 輝度↑  │        │     │
├───────┼─────┼────────┼────────┼─────┤
│       │Mute │ 音量↓  │ 音量↑  │     │
├───────┼─────┼────────┼────────┼─────┤
│       │     │ 輝度↓  │        │     │
└───────┴─────┴────────┴────────┴─────┘

右手側（Fキー）:
┌─────┬─────┬─────┬─────┬─────┐
│ F1  │ F2  │ F3  │ F4  │ F5  │
├─────┼─────┼─────┼─────┼─────┤────────┐
│ F6  │ F7  │ F8  │ F9  │ F10 │  F13   │
├─────┼─────┼─────┼─────┼─────┤────────┤
│     │     │     │     │ F11 │        │
└─────┴─────┴─────┴─────┴─────┴────────┘
                             F12
```

| キー | 機能 |
|------|------|
| Q | スリープ（Macをスリープ状態に） |
| S | ミュート（消音） |
| D | 音量ダウン |
| F | 音量アップ |
| E | 輝度アップ |
| C | 輝度ダウン |

使い方の例：
- Del長押し + Q でMacをスリープ
- Del長押し + F で音量を上げる
- Del長押し + 右手キー でFキー入力

---

### 数字・記号 レイヤー

**Space キーを長押ししている間**、このレイヤーが有効になります。

テンキーのように数字を入力したり、プログラミングでよく使う記号を入力できます。

```
左手側（数字入力）:
┌─────┬─────┬─────┬─────┬─────┐
│  -  │  7  │  8  │  9  │  +  │
├─────┼─────┼─────┼─────┼─────┤
│  /  │  4  │  5  │  6  │  *  │
├─────┼─────┼─────┼─────┼─────┤────────┐
│ 0※1 │  1  │  2  │  3  │  .  │   =    │
└─────┴─────┴─────┴─────┴─────┴────────┘

右手側（記号入力）:
┌─────┬─────┬─────┬─────┬─────┐
│  ^  │  &  │  ~  │  (  │  )  │
├─────┼─────┼─────┼─────┼─────┤────────┐
│  !  │  @  │  #  │  $  │  %  │   _    │
├─────┼─────┼─────┼─────┼─────┤────────┤
│  [  │  ]  │  {  │  }  │  ¥  │        │
└─────┴─────┴─────┴─────┴─────┴────────┘
                                  |

※1 長押しで Shift キー
```

記号の読み方：
- `^` : キャレット（べき乗記号）
- `&` : アンパサンド
- `~` : チルダ
- `!` : エクスクラメーションマーク（感嘆符）
- `@` : アットマーク
- `#` : ハッシュ（シャープ）
- `$` : ドルマーク
- `%` : パーセント
- `_` : アンダースコア（アンダーバー）
- `[` `]` : 角カッコ
- `{` `}` : 波カッコ（中カッコ）
- `¥` : 円記号（バックスラッシュ）
- `|` : パイプ（縦棒）

---

### 矢印キー レイヤー

**英数キーを長押ししている間**、このレイヤーが有効になります。

矢印キーやカーソル移動は **右手** で操作します。左手は英数キーを押すだけなので負担が少ないです。

```
左手側:                                    右手側:
┌─────┬─────┬─────┬─────┬─────┐      ┌───────┬──────┬──────┬────────┬────────┐
│     │     │     │     │     │      │  Esc  │      │  ↑   │ 前タブ  │ 次タブ  │
├─────┼─────┼─────┼─────┼─────┤   ┌──┼───────┼──────┼──────┼────────┼────────┤
│     │     │     │     │     │   │選←│ Home  │  ←  │  ↓   │   →   │  End   │
├─────┼─────┼─────┼─────┼─────┤   ├──┼───────┼──────┼──────┼────────┼────────┤
│Shift│     │     │     │     │   │選→│       │      │      │        │        │
└─────┴─────┴─────┴─────┴─────┘   └──┴───────┴──────┴──────┴────────┴────────┘

右手のキー配置（Vim風HJKL）:
- Y = Esc（エスケープ）
- I = ↑（上矢印）
- O = 前タブ（Ctrl+Shift+Tab）
- P = 次タブ（Ctrl+Tab）
- H = Home（行頭）
- J = ←（左矢印）
- K = ↓（下矢印）
- L = →（右矢印）
- ' = End（行末）
- 内側上 = 選択拡張←（Cmd+Shift+←）
- 内側下 = 選択拡張→（Cmd+Shift+→）
```

使い方の例：
- 英数長押し + J/K/I/L で矢印キー操作
- 英数長押し + H/（'）で行頭/行末にジャンプ
- 英数長押し + O/P でブラウザのタブ切り替え
- 左手Shift + 右手矢印 でテキスト選択

---

### 設定 レイヤー

Bluetooth 接続の設定や、キーボードのリセットができます。

**注意**: 現在の設定では、設定レイヤーへの直接アクセス方法が設定されていません。
必要に応じてキーマップを編集して、設定レイヤーへのアクセスキーを追加してください。

```
右手側:
┌─────┬─────┬─────┬─────┬─────┐
│ BT1 │ BT2 │ BT3 │ BT4 │ BT5 │
├─────┼─────┼─────┼─────┼─────┤
│     │     │     │     │     │
├─────┼─────┼─────┼─────┼─────┤──────────┐
│     │     │     │     │     │ BT接続   │
│     │     │     │     │     │クリア    │
└─────┴─────┴─────┴─────┴─────┴──────────┘
                      リセット   全BT接続
                                クリア

左手側:
┌─────┬─────┬─────┬─────┬─────┐
│     │     │     │     │     │
├─────┼─────┼─────┼─────┼─────┤
│     │     │     │     │     │
├─────┼─────┼─────┼─────┼─────┤
│     │  1  │  2  │  3  │     │
└─────┴─────┴─────┴─────┴─────┘
```

#### Bluetooth 接続の設定方法

このキーボードは最大 **5台** のデバイスに接続できます。

**新しいデバイスを接続する手順:**

1. かなキーを長押ししながら、右手側の **BT1～BT5** のどれかを押す
2. キーボードがペアリングモードになります
3. デバイス側（Mac、iPad など）で Bluetooth 設定を開く
4. 「roBa」というキーボードを選択して接続

**接続先を切り替える:**
- かなキーを長押ししながら、接続したいデバイスの番号（BT1～BT5）を押す

**接続情報をクリア:**
- 右側の「BT接続クリア」: 現在選択中の接続をクリア
- 右側の「全BT接続クリア」: すべての接続情報をクリア

---

## 特殊な機能

### トラックボール（マウス機能）

右手側にトラックボールが搭載されています。

- **ボールを動かす**: マウスカーソルが移動します
- **マウス レイヤー**: トラックボールを動かすと自動的に切り替わり、クリックができます
  - J キー → 左クリック
  - K キー → 中クリック（ホイールクリック）
  - L キー → 右クリック

- **スクロール レイヤー**: I キーを長押ししている間、トラックボールでスクロールできます

### ロータリーエンコーダー（左手側）

左手側にあるダイヤル（回すボタン）です。

- **通常時**: 回すとページアップ/ページダウン
- **矢印キーレイヤー時**: 回すとブラウザのタブ切り替え（Ctrl+PageUp/PageDown）

---

## Mac JIS配列について

このキーボードは **Mac で JIS 配列として認識される** ように設定されています。

### 重要な注意点

- Mac の「システム設定」→「キーボード」で **「日本語キーボード」を選択** してください
- 「US キーボード」や「英語キーボード」に設定すると、記号の位置がずれます

### 記号の対応表

Mac の JIS 配列設定で、以下の記号が正しく入力できます：

| 記号 | 名前 | 入力方法 |
|------|------|----------|
| `"` | ダブルクォーテーション | 同時押し: S + X |
| `'` | シングルクォート | L の右のキー |
| `=` | イコール | 同時押し: V + B |
| `+` | プラス | 数字レイヤー（Space長押し）で左手 T |
| `^` | キャレット | 数字レイヤーで右手 Y |
| `&` | アンパサンド | 数字レイヤーで右手 U |
| `~` | チルダ | 数字レイヤーで右手 I（上） |
| `@` | アットマーク | 数字レイヤーで右手 J |
| `:` | コロン | 左手側の小さいボタン（B の右）※長押しで Shift |
| `*` | アスタリスク | 数字レイヤーで左手 G |
| `_` | アンダースコア | 数字レイヤーで右手側の小さいボタン |
| `[` | 左角カッコ | 数字レイヤーで右手 H（下） |
| `]` | 右角カッコ | 数字レイヤーで右手 J（下） |
| `(` | 左丸カッコ | 数字レイヤーで右手 O（上） |
| `)` | 右丸カッコ | 数字レイヤーで右手 P（上） |
| `{` | 左波カッコ | 数字レイヤーで右手 K（下） |
| `}` | 右波カッコ | 数字レイヤーで右手 L（下） |
| `¥` | 円記号 | 数字レイヤーで右手 /（下右） |
| `|` | パイプ | 数字レイヤーで右手の一番下 |

---

## トラブルシューティング

### 記号が正しく入力できない

→ Mac の設定を確認してください：
1. 「システム設定」を開く
2. 「キーボード」を選択
3. 「キーボードの種類」が **「日本語キーボード」** になっているか確認

### Bluetooth 接続ができない

→ 設定レイヤーで接続をクリアしてから、再度ペアリングしてください：
1. かなキーを長押ししながら「BT接続クリア」を押す
2. もう一度 BT1～BT5 のどれかを押してペアリング

### トラックボールが反応しない

→ 右手側のキーボードが電源ON になっているか確認してください
→ 電池残量を確認してください

---

## 参考情報

- フォーク元リポジトリ: https://github.com/kumamuk-git/zmk-config-roBa
- ZMK Firmware 公式サイト: https://zmk.dev/

---

**このキーボードを楽しんでください！**
